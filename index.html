<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <title>PDFLokal - Gabung PDF, Kompres, Edit | Gratis & Cepat</title>
  <meta name="description" content="Tool PDF & gambar gratis. Gabung, pisah, kompres, edit PDF langsung di browser. File tidak pernah diupload. Cepat & aman.">
  <meta name="keywords" content="gabung pdf, merge pdf, kompres pdf, edit pdf, kompres gambar, convert pdf, gratis, indonesia, tanpa upload">
  
  <!-- Open Graph -->
  <meta property="og:title" content="PDFLokal - PDF Tools Gratis & Cepat">
  <meta property="og:description" content="Urus dokumen langsung di browser. Gratis, cepat, aman.">
  <meta property="og:image" content="images/og-image.png">
  <meta property="og:type" content="website">
  
  <!-- Mobile -->
  <meta name="theme-color" content="#ffffff">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23dc2626'/><text x='50' y='68' font-size='50' text-anchor='middle' fill='white' font-family='system-ui' font-weight='bold'>P</text></svg>">

  <!-- Vercel Web Analytics -->
  <script>
    window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
  </script>
  <script defer src="/_vercel/insights/script.js"></script>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="container header-inner">
      <a href="index.html" class="logo">
        <div class="logo-icon">P</div>
        <span>PDFLokal</span>
      </a>
      <div class="header-actions">
        <a href="https://github.com/ojanlubis/pdflokal" target="_blank" class="btn btn-ghost">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
        </a>
        <a href="dukung.html" class="btn btn-primary">
          ☕ Dukung Kami
        </a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="container">
    
    <!-- Home View -->
    <div id="home-view">
      <!-- Hero -->
      <section class="hero">
        <h1>Urus dokumen langsung di browser</h1>
        <p>Cepat, gratis, secure</p>
      </section>

      <!-- Drop Zone -->
      <div class="dropzone-container">
        <div class="dropzone" id="main-dropzone">
          <svg class="dropzone-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <h3>Seret file ke sini atau klik untuk pilih</h3>
          <p>PDF • JPG • PNG • WebP</p>
          <input type="file" id="file-input" multiple accept=".pdf,.jpg,.jpeg,.png,.webp">
        </div>
      </div>

      <!-- Privacy Badge -->
      <div class="privacy-badge">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <p>File tidak pernah meninggalkan perangkat Anda</p>
      </div>

      <!-- Tools Section -->
      <section class="tools-section">
        <!-- PDF Tools -->
        <div class="tools-category">
          <h2>PDF</h2>
          <div class="tools-grid">
            <div class="tool-card" data-tool="unified-editor" style="border: 2px solid var(--accent-primary);">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <path d="M16 13H8"/>
                <path d="M16 17H8"/>
                <path d="M10 9H8"/>
              </svg>
              <h3>Editor PDF</h3>
              <p>edit, merge, kelola</p>
            </div>
            <div class="tool-card" data-tool="page-manager">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="9"/>
                <rect x="14" y="3" width="7" height="9"/>
                <rect x="3" y="14" width="7" height="7"/>
                <rect x="14" y="14" width="7" height="7"/>
              </svg>
              <h3>Kelola Halaman</h3>
              <p>merge, split, manage</p>
            </div>
            <div class="tool-card" data-tool="edit">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
              <h3>Edit PDF</h3>
            </div>
            <div class="tool-card" data-tool="pdf-to-img">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21 15 16 10 5 21"/>
              </svg>
              <h3>PDF ke Gambar</h3>
            </div>
            <div class="tool-card" data-tool="compress-pdf">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 3v12"/>
                <path d="m8 11 4 4 4-4"/>
                <path d="M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4"/>
              </svg>
              <h3>Kompres PDF</h3>
              <p>Struktur saja</p>
            </div>
            <div class="tool-card" data-tool="protect">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
              <h3>Proteksi</h3>
            </div>
            <div class="tool-card" data-tool="unlock">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 9.9-1"/>
              </svg>
              <h3>Buka Kunci</h3>
            </div>
            <div class="tool-card" data-tool="watermark">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
              </svg>
              <h3>Watermark</h3>
            </div>
            <div class="tool-card" data-tool="page-numbers">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 7V4h16v3"/>
                <path d="M9 20h6"/>
                <path d="M12 4v16"/>
              </svg>
              <h3>Nomor Halaman</h3>
            </div>
            <div class="tool-card" data-tool="crop">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"/>
                <path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"/>
              </svg>
              <h3>Crop</h3>
            </div>
          </div>
        </div>

        <!-- Image Tools -->
        <div class="tools-category">
          <h2>Gambar</h2>
          <div class="tools-grid">
            <div class="tool-card" data-tool="compress-img">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              <h3>Kompres Gambar</h3>
            </div>
            <div class="tool-card" data-tool="resize">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 3 21 3 21 9"/>
                <polyline points="9 21 3 21 3 15"/>
                <line x1="21" y1="3" x2="14" y2="10"/>
                <line x1="3" y1="21" x2="10" y2="14"/>
              </svg>
              <h3>Ubah Ukuran</h3>
            </div>
            <div class="tool-card" data-tool="convert-img">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="17 1 21 5 17 9"/>
                <path d="M3 11V9a4 4 0 0 1 4-4h14"/>
                <polyline points="7 23 3 19 7 15"/>
                <path d="M21 13v2a4 4 0 0 1-4 4H3"/>
              </svg>
              <h3>Convert Format</h3>
            </div>
            <div class="tool-card" data-tool="img-to-pdf">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <path d="M12 18v-6"/>
                <path d="m9 15 3-3 3 3"/>
              </svg>
              <h3>Gambar ke PDF</h3>
            </div>
          </div>
        </div>

        <!-- Image Editing Tools -->
        <div class="tools-category">
          <h2>Alat Gambar</h2>
          <div class="tools-grid">
            <div class="tool-card" data-tool="remove-bg">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <path d="M9 3v18"/>
                <path d="M15 3v18"/>
                <path d="M3 9h18"/>
                <path d="M3 15h18"/>
              </svg>
              <h3>Hapus Latar Belakang</h3>
              <p>putih → transparan</p>
            </div>
          </div>
        </div>

        <!-- Coming Soon -->
        <div class="tools-category">
          <h2>Segera Hadir</h2>
          <div class="tools-grid">
            <div class="tool-card disabled" title="Fitur ini butuh server. Coming soon!">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
                <polyline points="10 9 9 9 8 9"/>
              </svg>
              <h3>PDF → Word</h3>
              <p>Butuh server</p>
            </div>
            <div class="tool-card disabled" title="Fitur ini butuh server. Coming soon!">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <line x1="3" y1="9" x2="21" y2="9"/>
                <line x1="3" y1="15" x2="21" y2="15"/>
                <line x1="9" y1="3" x2="9" y2="21"/>
                <line x1="15" y1="3" x2="15" y2="21"/>
              </svg>
              <h3>PDF → Excel</h3>
              <p>Butuh server</p>
            </div>
            <div class="tool-card disabled" title="Fitur ini butuh server. Coming soon!">
              <svg class="tool-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
                <line x1="16" y1="13" x2="8" y2="13"/>
                <line x1="16" y1="17" x2="8" y2="17"/>
              </svg>
              <h3>Word → PDF</h3>
              <p>Butuh server</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ================================================================
         WORKSPACE VIEWS - Each tool has its own workspace
         ================================================================ -->

    <!-- Unified Page Manager Workspace -->
    <div id="page-manager-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Kelola Halaman
        </h2>
      </div>
      <p class="mb-md" style="color: var(--text-secondary);">
        Seret file PDF untuk menambah • Seret halaman untuk mengatur urutan • Klik halaman untuk memilih
      </p>
      <div class="page-manager-toolbar">
        <button class="btn btn-secondary" onclick="document.getElementById('pm-file-input').click()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
          Tambah PDF
        </button>
        <input type="file" id="pm-file-input" multiple accept=".pdf" style="display:none">
        <div class="toolbar-divider"></div>
        <button class="btn btn-secondary btn-icon" onclick="pmUndo()" title="Undo (Ctrl+Z)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
        </button>
        <button class="btn btn-secondary btn-icon" onclick="pmRedo()" title="Redo (Ctrl+Y)">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"/></svg>
        </button>
        <div class="toolbar-divider"></div>
        <button class="btn btn-secondary" onclick="pmSelectAll()">Pilih Semua</button>
        <button class="btn btn-secondary" onclick="pmDeselectAll()">Batal Pilih</button>
        <div class="toolbar-divider"></div>
        <button class="btn btn-secondary" onclick="pmRotateSelected(90)" title="Putar 90° searah jarum jam">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/></svg>
          Putar
        </button>
        <button class="btn btn-secondary" onclick="pmDeleteSelected()" title="Hapus halaman terpilih">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
          Hapus
        </button>
      </div>
      <div class="page-grid empty" id="pm-pages">
        <div class="drop-hint" onclick="document.getElementById('pm-file-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret file PDF ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">PDF</span>
        </div>
      </div>
      <div class="pm-status" id="pm-status"></div>
      <div class="controls" style="flex-wrap: wrap;">
        <div class="control-group">
          <label>Aksi:</label>
          <select id="pm-action">
            <option value="save">Simpan semua halaman</option>
            <option value="extract">Ekstrak halaman terpilih</option>
            <option value="split-each">Pisah: setiap halaman jadi file</option>
          </select>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="pm-download-btn" disabled onclick="pmDownload()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download
        </button>
      </div>
      <div class="progress-container hidden" id="pm-progress">
        <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
        <p class="progress-text">Memproses...</p>
      </div>
    </div>

    <!-- Compress PDF Workspace -->
    <div id="compress-pdf-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Kompres PDF
        </h2>
      </div>
      <p class="mb-lg" style="color: var(--text-secondary);">⚠️ Catatan: Fitur ini mengoptimasi struktur PDF. Kompresi gambar memerlukan server dan belum tersedia. Hasil bervariasi.</p>
      <div class="preview-area" id="compress-pdf-preview">
        <div class="drop-hint" onclick="document.getElementById('compress-pdf-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret file PDF ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">PDF</span>
          <input type="file" id="compress-pdf-input" accept=".pdf" style="display:none">
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Kualitas Gambar:</label>
        </div>
        <div class="range-slider">
          <input type="range" id="pdf-quality" min="10" max="100" value="60">
          <span class="range-value">60%</span>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="compress-pdf-btn" disabled onclick="compressPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Kompres & Download
        </button>
      </div>
      <div class="progress-container hidden" id="compress-pdf-progress">
        <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
        <p class="progress-text">Memproses...</p>
      </div>
    </div>

    <!-- Unified Editor Workspace (combines Page Manager + Edit PDF) -->
    <div id="unified-editor-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Editor PDF
        </h2>
      </div>
      <div class="unified-editor-layout">
        <!-- Left Sidebar: Page Thumbnails -->
        <div class="unified-sidebar" id="unified-sidebar">
          <div class="unified-sidebar-header">
            <button class="sidebar-toggle-btn" onclick="ueToggleSidebar()" title="Sembunyikan sidebar">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
            </button>
            <span class="sidebar-title">Halaman</span>
            <button class="btn btn-secondary btn-sm ue-manage-btn" onclick="uePmOpenModal()" title="Kelola Halaman">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg>
              Kelola
            </button>
            <button class="btn btn-secondary btn-sm" onclick="document.getElementById('ue-file-input').click()" title="Tambah PDF">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
            </button>
            <input type="file" id="ue-file-input" multiple accept=".pdf" style="display:none">
          </div>
          <div class="unified-thumbnails" id="ue-thumbnails">
            <div class="drop-hint" onclick="document.getElementById('ue-file-input').click()">
              <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="width: 32px; height: 32px;"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
              <span class="drop-hint-text" style="font-size: 0.8125rem;">Upload PDF</span>
            </div>
          </div>
          <div class="unified-sidebar-footer">
            <button class="btn btn-secondary btn-sm btn-icon" onclick="ueUndo()" title="Undo">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
            </button>
            <button class="btn btn-secondary btn-sm btn-icon" onclick="ueRedo()" title="Redo">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"/></svg>
            </button>
            <span class="sidebar-page-count" id="ue-page-count">0 halaman</span>
          </div>
        </div>

        <!-- Main Content: Canvas + Toolbar -->
        <div class="unified-main">
          <!-- Editor Toolbar -->
          <div class="editor-toolbar">
            <!-- Hero Action: Signature -->
            <div class="editor-tool-group editor-tool-group--primary">
              <button class="editor-tool-btn editor-tool-btn--primary" id="ue-signature-btn" data-edit-tool="signature" onclick="ueOpenSignatureModal()" title="Tanda Tangan (S)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1.5"/><path d="m16 19-3-3 8-8 3 3-8 8Z"/></svg>
                Tanda Tangan
              </button>
              <!-- First-use tooltip -->
              <div class="signature-hint-tooltip" id="signature-hint-tooltip">
                Klik untuk menandatangani dokumen
                <span class="tooltip-arrow"></span>
              </div>
            </div>
            <div class="editor-tool-divider"></div>
            <!-- Secondary Tools -->
            <div class="editor-tool-group editor-tool-group--secondary">
              <button class="editor-tool-btn editor-tool-btn--secondary" data-edit-tool="select" onclick="ueSetTool('select')" title="Pilih & Edit (V)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/><path d="M13 13l6 6"/></svg>
                Pilih
              </button>
              <button class="editor-tool-btn editor-tool-btn--secondary" data-edit-tool="whiteout" onclick="ueSetTool('whiteout')" title="Whiteout (W)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                Whiteout
              </button>
              <button class="editor-tool-btn editor-tool-btn--secondary" data-edit-tool="text" onclick="ueSetTool('text')" title="Tambah Teks (T)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
                Teks
              </button>
              <button class="editor-tool-btn editor-tool-btn--secondary" onclick="ueOpenWatermarkModal()" title="Tambah Watermark">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                Watermark
              </button>
              <button class="editor-tool-btn editor-tool-btn--secondary" onclick="ueOpenPageNumModal()" title="Tambah Nomor Halaman">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7h16M4 12h16M4 17h10"/><circle cx="18" cy="17" r="2"/></svg>
                Nomor Halaman
              </button>
            </div>
            <div class="editor-tool-divider"></div>
            <div class="editor-action-group">
              <button class="editor-action-btn" onclick="ueUndoAnnotation()" title="Undo Edit (Ctrl+Z)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
              </button>
              <button class="editor-action-btn" onclick="ueRedoAnnotation()" title="Redo Edit (Ctrl+Y)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"/></svg>
              </button>
              <button class="editor-action-btn danger" onclick="ueClearPageAnnotations()" title="Hapus Semua Edit di Halaman Ini">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/></svg>
              </button>
            </div>
            <div class="editor-tool-divider"></div>
            <div class="editor-zoom-group">
              <button class="editor-action-btn" onclick="ueZoomOut()" title="Zoom Out (-)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>
              </button>
              <span class="zoom-level" id="ue-zoom-level">100%</span>
              <button class="editor-action-btn" onclick="ueZoomIn()" title="Zoom In (+)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>
              </button>
              <button class="editor-action-btn" onclick="ueZoomReset()" title="Reset Zoom (0)">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
              </button>
            </div>
            <button class="btn btn-primary btn--download-hero" id="ue-download-btn" disabled onclick="ueDownload()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
              Download PDF
            </button>
          </div>

          <!-- Status Bar -->
          <div class="ue-status-bar" id="ue-status-bar">
            <span id="ue-editor-status">Pilih halaman untuk mulai mengedit</span>
          </div>

          <!-- Canvas Wrapper -->
          <div class="unified-canvas-wrapper" id="ue-canvas-wrapper">
            <!-- Signature confirm button (positioned dynamically) -->
            <button class="signature-confirm-btn" id="signature-confirm-btn" style="display: none;">Konfirmasi</button>
            <div class="unified-empty-state" id="ue-empty-state">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="color: var(--text-tertiary);">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <polyline points="14 2 14 8 20 8"/>
              </svg>
              <p style="color: var(--text-secondary); margin-top: var(--space-md);">Upload PDF atau pilih halaman dari sidebar</p>
            </div>
            <canvas id="ue-canvas" class="editor-canvas" style="display: none;"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit PDF Workspace -->
    <div id="edit-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Edit PDF
        </h2>
      </div>
      <div class="editor-container">
        <div class="editor-toolbar">
          <div class="editor-tool-group">
            <button class="editor-tool-btn" data-edit-tool="select" onclick="setEditTool('select')" title="Pilih & Edit (V)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"/><path d="M13 13l6 6"/></svg>
              Pilih
            </button>
            <button class="editor-tool-btn" data-edit-tool="whiteout" onclick="setEditTool('whiteout')" title="Whiteout (W)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
              Whiteout
            </button>
            <button class="editor-tool-btn" data-edit-tool="text" onclick="setEditTool('text')" title="Tambah Teks (T)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7V4h16v3M9 20h6M12 4v16"/></svg>
              Teks
            </button>
            <button class="editor-tool-btn" data-edit-tool="signature" onclick="openSignatureModal()" title="Tanda Tangan (S)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v1.5"/><path d="m16 19-3-3 8-8 3 3-8 8Z"/></svg>
              Tanda Tangan
            </button>
            <button class="editor-tool-btn" onclick="openEditorWatermarkModal()" title="Tambah Watermark">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              Watermark
            </button>
            <button class="editor-tool-btn" onclick="openEditorPageNumModal()" title="Tambah Nomor Halaman">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7h16M4 12h16M4 17h10"/><circle cx="18" cy="17" r="2"/></svg>
              Nomor Halaman
            </button>
          </div>
          <div class="editor-tool-divider"></div>
          <div class="editor-action-group">
            <button class="editor-action-btn" onclick="undoEdit()" title="Undo (Ctrl+Z)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7v6h6"/><path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"/></svg>
            </button>
            <button class="editor-action-btn" onclick="redoEdit()" title="Redo (Ctrl+Y)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 7v6h-6"/><path d="M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3L21 13"/></svg>
            </button>
            <button class="editor-action-btn danger" onclick="clearCurrentPageAnnotations()" title="Hapus Semua di Halaman Ini">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/></svg>
            </button>
          </div>
          <div class="editor-status" id="editor-status">
            <span class="status-text">Pilih alat untuk mulai mengedit</span>
          </div>
        </div>
        <div class="editor-canvas-wrapper">
          <canvas id="edit-canvas" class="editor-canvas"></canvas>
        </div>
        <div class="editor-page-nav">
          <button id="edit-prev" onclick="editPrevPage()">← Sebelumnya</button>
          <span id="edit-page-info">Halaman 1 dari 1</span>
          <button id="edit-next" onclick="editNextPage()">Berikutnya →</button>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="edit-btn" disabled onclick="saveEditedPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download PDF
        </button>
      </div>
    </div>

    <!-- PDF to Image Workspace -->
    <div id="pdf-to-img-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          PDF ke Gambar
        </h2>
      </div>
      <div class="page-grid empty" id="pdf-img-pages">
        <div class="drop-hint" onclick="document.getElementById('pdf-img-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret file PDF ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">PDF</span>
          <input type="file" id="pdf-img-input" accept=".pdf" style="display:none">
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Format:</label>
          <select id="img-format">
            <option value="png">PNG</option>
            <option value="jpeg">JPG</option>
          </select>
        </div>
        <div class="control-group">
          <label>Skala:</label>
          <select id="img-scale">
            <option value="1">1x (72 DPI)</option>
            <option value="2" selected>2x (144 DPI)</option>
            <option value="3">3x (216 DPI)</option>
          </select>
        </div>
        <button class="btn btn-secondary" onclick="selectAllPdfImgPages()">Pilih Semua</button>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="pdf-img-btn" disabled onclick="convertPDFtoImages()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download Gambar
        </button>
      </div>
      <div class="progress-container hidden" id="pdf-img-progress">
        <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
        <p class="progress-text">Memproses...</p>
      </div>
    </div>

    <!-- Protect PDF Workspace -->
    <div id="protect-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Proteksi PDF
        </h2>
      </div>
      <div class="preview-area" id="protect-preview">
        <div class="drop-hint" onclick="document.getElementById('protect-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret file PDF ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">PDF</span>
          <input type="file" id="protect-input" accept=".pdf" style="display:none">
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Password:</label>
          <input type="password" id="protect-password" placeholder="Masukkan password">
        </div>
        <div class="control-group">
          <label>Konfirmasi:</label>
          <input type="password" id="protect-password-confirm" placeholder="Konfirmasi password">
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="protect-btn" disabled onclick="protectPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Proteksi & Download
        </button>
      </div>
    </div>

    <!-- Unlock PDF Workspace -->
    <div id="unlock-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Buka Kunci PDF
        </h2>
      </div>
      <p class="mb-lg" style="color: var(--text-secondary);">⚠️ Catatan: Anda harus mengetahui password untuk membuka kunci PDF.</p>
      <div class="preview-area" id="unlock-preview">
        <div class="drop-hint" onclick="document.getElementById('unlock-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret file PDF ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">PDF</span>
          <input type="file" id="unlock-input" accept=".pdf" style="display:none">
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Password:</label>
          <input type="password" id="unlock-password" placeholder="Masukkan password PDF">
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="unlock-btn" disabled onclick="unlockPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Buka Kunci & Download
        </button>
      </div>
    </div>

    <!-- Watermark Workspace -->
    <div id="watermark-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Watermark PDF
        </h2>
      </div>
      <div class="editor-canvas-wrapper" style="margin-bottom: var(--space-xl);">
        <canvas id="watermark-preview-canvas" class="editor-canvas"></canvas>
      </div>
      <div class="controls" style="flex-wrap: wrap;">
        <div class="control-group">
          <label>Teks Watermark:</label>
          <input type="text" id="watermark-text" placeholder="CONFIDENTIAL" value="CONFIDENTIAL" onchange="updateWatermarkPreview()">
        </div>
        <div class="control-group">
          <label>Ukuran:</label>
          <select id="watermark-size" onchange="updateWatermarkPreview()">
            <option value="24">Kecil</option>
            <option value="48" selected>Sedang</option>
            <option value="72">Besar</option>
          </select>
        </div>
        <div class="control-group">
          <label>Warna:</label>
          <input type="color" id="watermark-color" value="#dc2626" onchange="updateWatermarkPreview()">
        </div>
        <div class="control-group">
          <label>Opacity:</label>
        </div>
        <div class="range-slider" style="max-width: 200px;">
          <input type="range" id="watermark-opacity" min="10" max="100" value="30" onchange="updateWatermarkPreview()">
          <span class="range-value">30%</span>
        </div>
        <div class="control-group">
          <label>Rotasi:</label>
          <select id="watermark-rotation" onchange="updateWatermarkPreview()">
            <option value="0">0°</option>
            <option value="-45" selected>-45°</option>
            <option value="-30">-30°</option>
            <option value="45">45°</option>
          </select>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="watermark-btn" disabled onclick="addWatermark()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download
        </button>
      </div>
    </div>

    <!-- Page Numbers Workspace -->
    <div id="page-numbers-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Nomor Halaman
        </h2>
      </div>
      <div class="preview-area" id="page-numbers-preview">
        <div class="drop-hint" onclick="document.getElementById('page-numbers-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret file PDF ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">PDF</span>
          <input type="file" id="page-numbers-input" accept=".pdf" style="display:none">
        </div>
      </div>
      <div class="controls" style="flex-wrap: wrap;">
        <div class="control-group">
          <label>Posisi:</label>
          <select id="page-num-position">
            <option value="bottom-center" selected>Bawah Tengah</option>
            <option value="bottom-left">Bawah Kiri</option>
            <option value="bottom-right">Bawah Kanan</option>
            <option value="top-center">Atas Tengah</option>
            <option value="top-left">Atas Kiri</option>
            <option value="top-right">Atas Kanan</option>
          </select>
        </div>
        <div class="control-group">
          <label>Format:</label>
          <select id="page-num-format">
            <option value="number">1, 2, 3...</option>
            <option value="page-of">Halaman 1 dari X</option>
            <option value="dash">- 1 -</option>
          </select>
        </div>
        <div class="control-group">
          <label>Mulai dari:</label>
          <input type="number" id="page-num-start" value="1" min="1" style="width: 80px;">
        </div>
        <div class="control-group">
          <label>Ukuran:</label>
          <select id="page-num-size">
            <option value="10">10pt</option>
            <option value="12" selected>12pt</option>
            <option value="14">14pt</option>
          </select>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="page-numbers-btn" disabled onclick="addPageNumbers()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download
        </button>
      </div>
    </div>

    <!-- Crop PDF Workspace -->
    <div id="crop-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Crop PDF
        </h2>
      </div>
      <p class="mb-md" style="color: var(--text-secondary);">Klik dan seret pada halaman untuk menentukan area crop</p>
      <div class="editor-canvas-wrapper">
        <canvas id="crop-canvas" class="editor-canvas"></canvas>
      </div>
      <div class="editor-page-nav">
        <button id="crop-prev" onclick="cropPrevPage()">← Sebelumnya</button>
        <span id="crop-page-info">Halaman 1 dari 1</span>
        <button id="crop-next" onclick="cropNextPage()">Berikutnya →</button>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>
            <input type="checkbox" id="crop-all-pages" checked> Terapkan ke semua halaman
          </label>
        </div>
        <button class="btn btn-secondary" onclick="resetCrop()">Reset Crop</button>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="crop-btn" disabled onclick="applyCrop()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Crop & Download
        </button>
      </div>
    </div>

    <!-- Compress Image Workspace -->
    <div id="compress-img-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Kompres Gambar
        </h2>
      </div>
      <div class="preview-area" id="compress-img-area">
        <div class="drop-hint" id="compress-img-hint" onclick="document.getElementById('compress-img-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret gambar ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">JPG • PNG • WebP</span>
          <input type="file" id="compress-img-input" accept="image/*" style="display:none">
        </div>
        <div class="preview-comparison hidden" id="compress-img-comparison">
          <div class="preview-box">
            <img id="compress-original" src="" alt="Original">
            <p id="compress-original-size">Original: -</p>
          </div>
          <div class="preview-arrow">→</div>
          <div class="preview-box">
            <img id="compress-preview" src="" alt="Preview">
            <p id="compress-preview-size">Hasil: -</p>
          </div>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Kualitas:</label>
        </div>
        <div class="range-slider">
          <input type="range" id="compress-quality" min="10" max="100" value="80" oninput="updateCompressPreview()">
          <span class="range-value">80%</span>
        </div>
        <div class="control-group">
          <label>Format output:</label>
          <select id="compress-format" onchange="updateCompressPreview()">
            <option value="jpeg">JPG</option>
            <option value="png">PNG</option>
            <option value="webp">WebP</option>
          </select>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="compress-img-btn" disabled onclick="downloadCompressedImage()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download
        </button>
      </div>
    </div>

    <!-- Resize Image Workspace -->
    <div id="resize-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Ubah Ukuran Gambar
        </h2>
      </div>
      <div class="preview-area" id="resize-area">
        <div class="drop-hint" id="resize-hint" onclick="document.getElementById('resize-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret gambar ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">JPG • PNG • WebP</span>
          <input type="file" id="resize-input" accept="image/*" style="display:none">
        </div>
        <div class="preview-box hidden" id="resize-preview-box">
          <img id="resize-preview" src="" alt="Preview">
          <p id="resize-dimensions">Dimensi: -</p>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Lebar:</label>
          <input type="number" id="resize-width" min="1" oninput="onResizeChange('width')">
          <span>px</span>
        </div>
        <div class="control-group">
          <label>Tinggi:</label>
          <input type="number" id="resize-height" min="1" oninput="onResizeChange('height')">
          <span>px</span>
        </div>
        <div class="control-group">
          <label>
            <input type="checkbox" id="resize-lock" checked> Kunci rasio aspek
          </label>
        </div>
        <div class="control-group">
          <label>Atau persentase:</label>
          <select id="resize-percent" onchange="applyResizePercent()">
            <option value="">Pilih...</option>
            <option value="25">25%</option>
            <option value="50">50%</option>
            <option value="75">75%</option>
            <option value="150">150%</option>
            <option value="200">200%</option>
          </select>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="resize-btn" disabled onclick="downloadResizedImage()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download
        </button>
      </div>
    </div>

    <!-- Convert Image Workspace -->
    <div id="convert-img-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Convert Format Gambar
        </h2>
      </div>
      <div class="preview-area" id="convert-area">
        <div class="drop-hint" id="convert-hint" onclick="document.getElementById('convert-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret gambar ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">JPG • PNG • WebP</span>
          <input type="file" id="convert-input" accept="image/*" style="display:none">
        </div>
        <div class="preview-box hidden" id="convert-preview-box">
          <img id="convert-preview" src="" alt="Preview">
          <p id="convert-info">-</p>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Convert ke:</label>
          <select id="convert-format">
            <option value="jpeg">JPG</option>
            <option value="png">PNG</option>
            <option value="webp">WebP</option>
          </select>
        </div>
        <div class="control-group" id="convert-quality-group">
          <label>Kualitas:</label>
        </div>
        <div class="range-slider" id="convert-quality-slider" style="max-width: 200px;">
          <input type="range" id="convert-quality" min="10" max="100" value="90">
          <span class="range-value">90%</span>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="convert-btn" disabled onclick="convertImage()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download
        </button>
      </div>
    </div>

    <!-- Image to PDF Workspace -->
    <div id="img-to-pdf-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Gambar ke PDF
        </h2>
      </div>
      <div class="file-list empty" id="img-pdf-file-list">
        <div class="drop-hint" onclick="document.getElementById('img-pdf-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret gambar ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">JPG • PNG • WebP</span>
        </div>
      </div>
      <div class="controls">
        <button class="btn btn-secondary" onclick="document.getElementById('img-pdf-input').click()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
          Tambah Gambar
        </button>
        <input type="file" id="img-pdf-input" multiple accept="image/*" style="display:none">
        <div class="control-group">
          <label>Ukuran halaman:</label>
          <select id="img-pdf-size">
            <option value="a4">A4</option>
            <option value="letter">Letter</option>
            <option value="fit">Sesuai gambar</option>
          </select>
        </div>
        <div class="control-group">
          <label>Orientasi:</label>
          <select id="img-pdf-orientation">
            <option value="portrait">Portrait</option>
            <option value="landscape">Landscape</option>
            <option value="auto">Otomatis</option>
          </select>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="img-pdf-btn" disabled onclick="imagesToPDF()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Convert ke PDF
        </button>
      </div>
      <div class="progress-container hidden" id="img-pdf-progress">
        <div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div>
        <p class="progress-text">Memproses...</p>
      </div>
    </div>

    <!-- Remove Background Workspace -->
    <div id="remove-bg-workspace" class="workspace">
      <div class="workspace-header">
        <h2>
          <button class="back-btn" onclick="showHome()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Kembali
          </button>
          Hapus Latar Belakang
        </h2>
      </div>
      <p class="mb-lg" style="color: var(--text-secondary);">Upload gambar dan atur threshold untuk mengubah warna putih/terang menjadi transparan.</p>
      <div class="preview-area" id="remove-bg-area">
        <div class="drop-hint" id="remove-bg-hint" onclick="document.getElementById('remove-bg-input').click()">
          <svg class="drop-hint-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <span class="drop-hint-text">Seret gambar ke sini atau klik untuk upload</span>
          <span class="drop-hint-subtext">JPG • PNG</span>
          <input type="file" id="remove-bg-input" accept="image/jpeg,image/png" style="display:none">
        </div>
        <div class="preview-comparison hidden" id="remove-bg-comparison">
          <div class="preview-box">
            <img id="remove-bg-original" src="" alt="Original">
            <p>Original</p>
          </div>
          <div class="preview-arrow">→</div>
          <div class="preview-box" style="background: repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%) 50% / 16px 16px; border-radius: var(--radius-md);">
            <canvas id="remove-bg-preview" style="max-width: 100%; max-height: 300px;"></canvas>
            <p id="remove-bg-result-info">Hasil (transparan)</p>
          </div>
        </div>
      </div>
      <div class="controls">
        <div class="control-group">
          <label>Threshold Putih:</label>
        </div>
        <div class="range-slider">
          <input type="range" id="remove-bg-threshold" min="200" max="255" value="240" oninput="updateRemoveBgPreview()">
          <span class="range-value" id="remove-bg-threshold-value">240</span>
        </div>
        <div class="control-group">
          <label title="Semakin tinggi, semakin banyak warna terang yang dihapus">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="vertical-align: middle; margin-right: 4px;"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
            Tips: 255 = hanya putih murni, 200 = termasuk warna keabu-abuan
          </label>
        </div>
      </div>
      <div class="action-bar">
        <button class="btn btn-primary btn-lg" id="remove-bg-btn" disabled onclick="downloadRemovedBgImage()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
          Download PNG
        </button>
      </div>
    </div>

  </main>

  <!-- Signature Modal -->
  <div id="signature-modal" class="signature-modal">
    <div class="signature-box">
      <h3>Buat Tanda Tangan</h3>
      <div class="signature-tabs">
        <button class="signature-tab" onclick="switchSignatureTab('upload')">Upload Gambar</button>
        <button class="signature-tab" onclick="switchSignatureTab('draw')">Gambar</button>
      </div>
      <div id="signature-upload-tab" class="signature-tab-content">
        <div class="signature-upload-area" id="signature-upload-hint" onclick="document.getElementById('signature-upload-input').click()">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
          <p>Klik untuk upload gambar tanda tangan</p>
          <span>JPG • PNG</span>
          <input type="file" id="signature-upload-input" accept="image/jpeg,image/png" style="display:none">
        </div>
        <div class="signature-actions">
          <button class="btn btn-ghost" onclick="closeSignatureModal()">Batal</button>
        </div>
      </div>
      <div id="signature-draw-tab" class="signature-tab-content">
        <canvas id="signature-canvas" class="signature-canvas"></canvas>
        <div class="signature-actions">
          <button class="btn btn-secondary" onclick="clearSignature()">Hapus</button>
          <button class="btn btn-ghost" onclick="closeSignatureModal()">Batal</button>
          <button class="btn btn-primary" onclick="useSignature()">Gunakan</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Signature Background Removal Modal -->
  <div id="signature-bg-modal" class="edit-modal">
    <div class="edit-modal-box" style="max-width: 700px;">
      <h3>Hapus Latar Belakang Tanda Tangan</h3>
      <div class="edit-modal-content">
        <p class="mb-md" style="color: var(--text-secondary);">Atur threshold untuk mengubah warna putih/terang menjadi transparan.</p>
        <div class="signature-bg-preview">
          <div class="preview-box">
            <img id="sig-bg-original" src="" alt="Original" style="max-width: 200px; max-height: 150px;">
            <p>Original</p>
          </div>
          <div class="preview-arrow">→</div>
          <div class="preview-box" style="background: repeating-conic-gradient(#ddd 0% 25%, #fff 0% 50%) 50% / 12px 12px; border-radius: var(--radius-md); padding: var(--space-sm);">
            <canvas id="sig-bg-preview" style="max-width: 200px; max-height: 150px;"></canvas>
            <p>Hasil</p>
          </div>
        </div>
        <div class="controls" style="justify-content: center; margin-top: var(--space-lg);">
          <div class="control-group">
            <label>Threshold:</label>
          </div>
          <div class="range-slider" style="max-width: 250px;">
            <input type="range" id="sig-bg-threshold" min="180" max="255" value="230" oninput="updateSignatureBgPreview()">
            <span class="range-value" id="sig-bg-threshold-value">230</span>
          </div>
        </div>
      </div>
      <div class="edit-modal-actions">
        <button class="btn btn-ghost" onclick="closeSignatureBgModal()">Batal</button>
        <button class="btn btn-primary" onclick="useSignatureFromUpload()">Gunakan Tanda Tangan</button>
      </div>
    </div>
  </div>

  <!-- Text Input Modal -->
  <div id="text-input-modal" class="edit-modal">
    <div class="edit-modal-box">
      <h3>Tambah Teks</h3>
      <div class="edit-modal-content">
        <textarea id="text-input-field" class="edit-text-input" placeholder="Masukkan teks..." rows="3"></textarea>

        <div class="edit-text-options">
          <!-- Font Family -->
          <div class="edit-option-group">
            <label>Font</label>
            <select id="modal-font-family">
              <option value="Helvetica" selected>Helvetica</option>
              <option value="Times-Roman">Times Roman</option>
              <option value="Courier">Courier</option>
            </select>
          </div>

          <!-- Font Size - Number Input -->
          <div class="edit-option-group">
            <label>Ukuran</label>
            <div class="font-size-input-wrap">
              <input type="number" id="modal-font-size" value="16" min="6" max="120" step="1">
              <span class="font-size-unit">pt</span>
            </div>
          </div>

          <!-- Bold/Italic -->
          <div class="edit-option-group">
            <label>Gaya</label>
            <div class="text-style-toggles">
              <button type="button" class="text-style-btn" id="modal-text-bold" title="Bold">
                <strong>B</strong>
              </button>
              <button type="button" class="text-style-btn" id="modal-text-italic" title="Italic">
                <em>I</em>
              </button>
            </div>
          </div>
        </div>

        <!-- Color Options -->
        <div class="edit-text-color-section">
          <label>Warna</label>
          <div class="color-options-row">
            <div class="color-presets">
              <button type="button" class="color-preset-btn" data-color="#000000" style="background:#000000" title="Hitam"></button>
              <button type="button" class="color-preset-btn" data-color="#DC2626" style="background:#DC2626" title="Merah"></button>
              <button type="button" class="color-preset-btn" data-color="#2563EB" style="background:#2563EB" title="Biru"></button>
              <button type="button" class="color-preset-btn" data-color="#16A34A" style="background:#16A34A" title="Hijau"></button>
              <button type="button" class="color-preset-btn" data-color="#9333EA" style="background:#9333EA" title="Ungu"></button>
              <button type="button" class="color-preset-btn" data-color="#EA580C" style="background:#EA580C" title="Oranye"></button>
            </div>
            <input type="color" id="modal-text-color" value="#000000" title="Pilih warna lain">
          </div>
        </div>

        <div class="edit-text-preview">
          <span id="text-preview-label">Preview:</span>
          <div id="text-preview" class="text-preview-box"></div>
        </div>
      </div>
      <div class="edit-modal-actions">
        <button class="btn btn-ghost" onclick="closeTextModal()">Batal</button>
        <button class="btn btn-primary" onclick="confirmTextInput()">Tambah Teks</button>
      </div>
    </div>
  </div>

  <!-- Editor Watermark Modal -->
  <div id="editor-watermark-modal" class="edit-modal">
    <div class="edit-modal-box">
      <h3>Tambah Watermark</h3>
      <div class="edit-modal-content">
        <div class="edit-option-group">
          <label>Teks Watermark</label>
          <input type="text" id="editor-wm-text" class="edit-text-input" value="CONFIDENTIAL" style="min-height: auto;">
        </div>
        <div class="edit-text-options">
          <div class="edit-option-group">
            <label>Ukuran Font</label>
            <select id="editor-wm-size">
              <option value="24">24pt</option>
              <option value="36">36pt</option>
              <option value="48" selected>48pt</option>
              <option value="60">60pt</option>
              <option value="72">72pt</option>
            </select>
          </div>
          <div class="edit-option-group">
            <label>Warna</label>
            <input type="color" id="editor-wm-color" value="#888888">
          </div>
          <div class="edit-option-group">
            <label>Opacity</label>
            <input type="range" id="editor-wm-opacity" min="10" max="100" value="30">
          </div>
          <div class="edit-option-group">
            <label>Rotasi</label>
            <select id="editor-wm-rotation">
              <option value="-45" selected>-45°</option>
              <option value="-30">-30°</option>
              <option value="0">0°</option>
              <option value="30">30°</option>
              <option value="45">45°</option>
            </select>
          </div>
        </div>
        <div class="edit-option-group">
          <label>Terapkan ke</label>
          <select id="editor-wm-pages">
            <option value="all">Semua halaman</option>
            <option value="current">Halaman ini saja</option>
          </select>
        </div>
      </div>
      <div class="edit-modal-actions">
        <button class="btn btn-ghost" onclick="closeEditorWatermarkModal()">Batal</button>
        <button class="btn btn-primary" onclick="applyEditorWatermark()">Terapkan Watermark</button>
      </div>
    </div>
  </div>

  <!-- Editor Page Number Modal -->
  <div id="editor-pagenum-modal" class="edit-modal">
    <div class="edit-modal-box">
      <h3>Tambah Nomor Halaman</h3>
      <div class="edit-modal-content">
        <div class="edit-text-options">
          <div class="edit-option-group">
            <label>Posisi</label>
            <select id="editor-pn-position">
              <option value="bottom-center" selected>Bawah Tengah</option>
              <option value="bottom-left">Bawah Kiri</option>
              <option value="bottom-right">Bawah Kanan</option>
              <option value="top-center">Atas Tengah</option>
              <option value="top-left">Atas Kiri</option>
              <option value="top-right">Atas Kanan</option>
            </select>
          </div>
          <div class="edit-option-group">
            <label>Format</label>
            <select id="editor-pn-format">
              <option value="number" selected>1, 2, 3...</option>
              <option value="page-of">Halaman 1 dari N</option>
              <option value="dash">- 1 -</option>
            </select>
          </div>
          <div class="edit-option-group">
            <label>Ukuran Font</label>
            <select id="editor-pn-size">
              <option value="10">10pt</option>
              <option value="12" selected>12pt</option>
              <option value="14">14pt</option>
              <option value="16">16pt</option>
            </select>
          </div>
          <div class="edit-option-group">
            <label>Mulai dari</label>
            <input type="number" id="editor-pn-start" value="1" min="1" style="width: 60px;">
          </div>
        </div>
      </div>
      <div class="edit-modal-actions">
        <button class="btn btn-ghost" onclick="closeEditorPageNumModal()">Batal</button>
        <button class="btn btn-primary" onclick="applyEditorPageNumbers()">Terapkan Nomor</button>
      </div>
    </div>
  </div>

  <!-- Page Manager Modal for Unified Editor -->
  <div id="ue-page-manager-modal" class="edit-modal">
    <div class="edit-modal-box ue-pm-modal-box">
      <div class="ue-pm-header">
        <h3>Kelola Halaman</h3>
        <button class="ue-pm-close-btn" onclick="uePmCloseModal()">&times;</button>
      </div>

      <div class="ue-pm-toolbar">
        <button class="btn btn-secondary btn-sm" onclick="document.getElementById('ue-pm-file-input').click()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
          Tambah Halaman
        </button>
        <input type="file" id="ue-pm-file-input" multiple accept=".pdf" style="display:none">

        <button class="btn btn-secondary btn-sm" id="ue-pm-extract-mode-btn" onclick="uePmToggleExtractMode()">
          Ekstrak Halaman
        </button>

        <div class="ue-pm-extract-actions" id="ue-pm-extract-actions" style="display:none;">
          <button class="btn btn-secondary btn-sm" onclick="uePmSelectAll()">Pilih Semua</button>
          <button class="btn btn-secondary btn-sm" onclick="uePmDeselectAll()">Batal Pilih</button>
          <span class="ue-pm-selection-count" id="ue-pm-selection-count">0 halaman dipilih</span>
        </div>
      </div>

      <div class="ue-pm-pages-container">
        <div class="ue-pm-pages" id="ue-pm-pages"></div>
      </div>

      <div class="edit-modal-actions">
        <span class="ue-pm-page-count" id="ue-pm-page-count">0 halaman</span>
        <button class="btn btn-primary" id="ue-pm-extract-btn" onclick="uePmExtractSelected()" style="display:none;">
          Ekstrak sebagai PDF baru
        </button>
        <button class="btn btn-ghost" onclick="uePmCloseModal()">Selesai</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>100% gratis • Open source • Made with ❤️ in Indonesia</p>
      <p class="mt-sm"><a href="https://github.com/ojanlubis/pdflokal" target="_blank">GitHub</a> • <a href="dukung.html">Dukung Kami</a></p>
    </div>
  </footer>

  <!-- Libraries -->
  <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>
  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
  
  <!-- Main App -->
  <script src="app.js"></script>
</body>
</html>
